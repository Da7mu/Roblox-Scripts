-- GUI Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CustomToggleGUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Utility Functions
local function addRoundedCorners(instance, radius)
	local uiCorner = Instance.new("UICorner")
	uiCorner.CornerRadius = UDim.new(0, radius)
	uiCorner.Parent = instance
end

local function addWhiteOutline(instance, thickness)
	local uiStroke = Instance.new("UIStroke")
	uiStroke.Thickness = thickness
	uiStroke.Color = Color3.new(1, 1, 1)
	uiStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	uiStroke.Parent = instance
end

-- Main Frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 220, 0, 150)
frame.Position = UDim2.new(0.35, 0, 0.3, 0)
frame.BackgroundColor3 = Color3.new(0, 0, 0)
frame.BackgroundTransparency = 0.4
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui
addRoundedCorners(frame, 12)
addWhiteOutline(frame, 2)

-- Button Template
local function createButton(name, position, parent)
	local button = Instance.new("TextButton")
	button.Size = UDim2.new(0, 180, 0, 30)
	button.Position = position
	button.Text = name .. ": OFF"
	button.TextScaled = true
	button.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
	button.BackgroundTransparency = 0.2
	button.TextColor3 = Color3.new(1, 1, 1)
	button.Font = Enum.Font.SourceSansBold
	button.Parent = parent
	addRoundedCorners(button, 8)
	addWhiteOutline(button, 2)
	return button
end

-- Auto Farm Button
local autoFarmBtn = createButton("Auto Farm", UDim2.new(0, 20, 0, 10), frame)

-- Auto Sell Button
local autoSellBtn = createButton("Auto Sell", UDim2.new(0, 20, 0, 50), frame)

-- TP Button
local tpBtn = Instance.new("TextButton")
tpBtn.Size = UDim2.new(0, 180, 0, 30)
tpBtn.Position = UDim2.new(0, 20, 0, 90)
tpBtn.Text = "TP"
tpBtn.TextScaled = true
tpBtn.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
tpBtn.BackgroundTransparency = 0.2
tpBtn.TextColor3 = Color3.new(1, 1, 1)
tpBtn.Font = Enum.Font.SourceSansBold
tpBtn.Parent = frame
addRoundedCorners(tpBtn, 8)
addWhiteOutline(tpBtn, 2)

-- Logic Variables
local autoFarmOn = false
local autoSellOn = false
local runningFarm = false
local runningSell = false

-- Auto Farm Logic
autoFarmBtn.MouseButton1Click:Connect(function()
	autoFarmOn = not autoFarmOn
	autoFarmBtn.Text = "Auto Farm: " .. (autoFarmOn and "ON" or "OFF")

	if autoFarmOn and not runningFarm then
		runningFarm = true
		task.spawn(function()
			while autoFarmOn do
				-- Script 1
				local args1 = {
					[1] = 100,
					[2] = true
				}
				local event = game:GetService("ReplicatedStorage").events:FindFirstChild("reelfinished ")
				if event then
					event:FireServer(unpack(args1))
				end

				-- Script 2
				local args2 = {
					[1] = 97.3999999999999,
					[2] = 1
				}
				local char = game:GetService("Players").LocalPlayer.Character
				local rod = char and char:FindFirstChild("Rod Of The Depths")
				if rod and rod:FindFirstChild("events") and rod.events:FindFirstChild("cast") then
					rod.events.cast:FireServer(unpack(args2))
				end

				task.wait(0.5)
			end
			runningFarm = false
		end)
	end
end)

-- Auto Sell Logic
autoSellBtn.MouseButton1Click:Connect(function()
	autoSellOn = not autoSellOn
	autoSellBtn.Text = "Auto Sell: " .. (autoSellOn and "ON" or "OFF")

	if autoSellOn and not runningSell then
		runningSell = true
		task.spawn(function()
			while autoSellOn do
				local sellEvent = game:GetService("ReplicatedStorage").events:FindFirstChild("SellAll")
				if sellEvent then
					sellEvent:InvokeServer()
				end
				task.wait(10)
			end
			runningSell = false
		end)
	end
end)

-- TP Button Logic
tpBtn.MouseButton1Click:Connect(function()
	local TweenService = game:GetService("TweenService")
	local Players = game:GetService("Players")
	local player = Players.LocalPlayer
	local character = player.Character or player.CharacterAdded:Wait()
	local rootPart = character:WaitForChild("HumanoidRootPart")

	local targetPart = workspace:WaitForChild("world"):WaitForChild("spawns"):WaitForChild("TpSpots"):WaitForChild("thedepthsmazeexit")
	local targetCFrame = targetPart.CFrame
	local offset = Vector3.new(0, 5, 0)

	local tweenInfo = TweenInfo.new(2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
	local tween = TweenService:Create(rootPart, tweenInfo, {
		CFrame = targetCFrame + offset
	})
	tween:Play()
end)
